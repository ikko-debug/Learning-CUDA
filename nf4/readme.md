
## 构造标准测试集





## 编写main.cu
### 反量化查表
来自github bitsandbytes/csrc/kernels.cu
```cpp
__device__ static float fp4_dequantization_lut[8] = {
    0.0f,            // 0b000
    0.005208333333f, // 0b001
    0.66666667f,     // 0b010
    1.0f,            // 0b011
    0.33333333f,     // 0b100
    0.5f,            // 0b101
    0.16666667f,     // 0b110
    0.25f            // 0b111
};

__device__ static float nf4_dequantization_lut[16] = {
    -1.0f,                 // 0b0000
    -0.6961928009986877f,  // 0b0001
    -0.5250730514526367f,  // 0b0010
    -0.39491748809814453f, // 0b0011
    -0.28444138169288635f, // 0b0100
    -0.18477343022823334f, // 0b0101
    -0.09105003625154495f, // 0b0110
    0.0f,                  // 0b0111
    0.07958029955625534f,  // 0b1000
    0.16093020141124725f,  // 0b1001
    0.24611230194568634f,  // 0b1010
    0.33791524171829224f,  // 0b1011
    0.44070982933044434f,  // 0b1100
    0.5626170039176941f,   // 0b1101
    0.7229568362236023f,   // 0b1110
    1.0f                   // 0b1111
};
```
bitsandbytes使用device，考虑是否使用constant
| 维度      | **device** static | **constant**      |
| ------- | ----------------- | ----------------- |
| 存储位置    | Global Memory     | Constant Memory   |
| 缓存      | L2 / L1           | 专用 Constant Cache |
| Warp 广播 | 无              |  有               |
| 访问延迟    | 高                 | 低                 |
| 适合      | 普通全局数据            | 查表 / 常量           |
使用constant先。
### host逻辑
1.输入解析，读取二进制文件
2.内存规划
3.数据加载，分配显存
4.启动kernel
5.记录性能，写入数据